spring:
    config:
        import: optional:file:.env[.properties]
    profiles:
        active: ${SPRING_PROFILES_ACTIVE:production}
    web:
        resources:
            static-locations: file:/app/frontend/build/
            add-mappings: true
    mvc:
        view:
            prefix: ""
            suffix: ""
        static-path-pattern: /**
    resources:
        static-locations: file:/app/static/
        add-mappings: false
    sql:
        init:
            mode: always
            schema-locations: classpath:schema-postgres.sql
            continue-on-error: true

logging:
    level:
        root: INFO
        com.mysite: DEBUG
        org.mybatis: DEBUG
        org.apache.ibatis: DEBUG
        java.sql: DEBUG
        javax.sql: DEBUG
---
spring:
    config:
        import: optional:file:.env[.properties]
        activate:
            on-profile: production
    datasource:
        driver-class-name: org.postgresql.Driver
        url: ${POSTGRES_DB}
        username: ${POSTGRES_USER}
        password: ${POSTGRES_PASSWORD}
        hikari:
            maximum-pool-size: 5
            minimum-idle: 5
            idle-timeout: 30000
            max-lifetime: 1800000
            connection-timeout: 30000
    sql:
        init:
            mode: always
            schema-locations: classpath:schema-postgres.sql
            continue-on-error: true

server:
    address: 0.0.0.0
    port: ${PORT:8080}

---
spring:
    config:
        activate:
            on-profile: dev
    datasource:
        driver-class-name: org.postgresql.Driver
        url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_NAME}
        username: ${DB_USERNAME}
        password: ${DB_PASSWORD}
        hikari:
            maximum-pool-size: 5
            minimum-idle: 5
            idle-timeout: 30000
            max-lifetime: 1800000
            connection-timeout: 30000
    sql:
        init:
            mode: always
            schema-locations: classpath:schema-postgres.sql
            continue-on-error: true

server:
    address: 0.0.0.0
