<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mysite.netflixProject.favmovie.FavMovieMapper">
    <insert id="insertFavMovie" parameterType="com.mysite.netflixProject.favmovie.FavMovieVO">
        INSERT INTO fav_movie (member_id, movie_title, movie_summary, movie_image) 
        VALUES (#{member_id}, #{movie_title}, #{movie_summary}, #{movie_image})
    </insert>

    <select id="chkLike" resultType="com.mysite.netflixProject.favmovie.FavMovieVO">
        SELECT movie_title 
        FROM fav_movie 
        WHERE movie_title = #{movie_title} AND member_id = #{member_id}
    </select>

    <select id="getFavMovielist" resultType="com.mysite.netflixProject.favmovie.FavMovieVO">
        SELECT * FROM fav_movie 
        WHERE member_id = #{member_id}
    </select>

    <delete id="deleteFavMovie">
        DELETE FROM fav_movie 
        WHERE movie_title = #{movie_title} AND member_id = #{member_id}
    </delete>

    <delete id="removeMember">
        DELETE FROM fav_movie 
        WHERE member_id = #{member_id}
    </delete>

    <select id="isDuplicateTitle" resultType="int">
        SELECT count(*) FROM fav_movie 
        WHERE member_id = #{member_id} AND movie_title = #{movie_title}
    </select>

    <update id="modifyID" parameterType="com.mysite.netflixProject.board.Idchange">
        UPDATE fav_movie 
        SET member_id = #{new_member_id} 
        WHERE member_id = #{old_member_id}
    </update>
</mapper>